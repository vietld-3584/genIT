{
  "file_paths": [
    "lib/db/README.md",
    "lib/db/SETUP.md",
    "lib/config/env.ts",
    "lib/logging/logger.ts",
    "lib/db/client.ts",
    "lib/db/migrations/.gitkeep",
    "lib/db/seed/seed.ts",
    "lib/db/types/index.ts",
    "lib/entities/user-account.ts",
    "lib/entities/category.ts",
    "lib/entities/brand.ts",
    "lib/entities/product.ts",
    "lib/entities/product-image.ts",
    "lib/entities/product-option.ts",
    "lib/entities/review.ts",
    "lib/entities/wishlist.ts",
    "lib/entities/comparison.ts",
    "lib/entities/email-confirmation-code.ts",
    "lib/entities/document.ts",
    "lib/entities/login-log.ts",
    "lib/entities/channel.ts",
    "lib/entities/channel-member.ts",
    "lib/entities/message.ts",
    "lib/entities/attachment.ts",
    "lib/entities/user-log.ts",
    "lib/entities/user-profile.ts",
    "lib/repositories/.gitkeep",
    "lib/utils/index.ts"
  ],
  "module_map": {
    "user_accounts": "user-account",
    "categories": "category",
    "brands": "brand",
    "products": "product",
    "product_images": "product-image",
    "product_options": "product-option",
    "reviews": "review",
    "wishlists": "wishlist",
    "comparisons": "comparison",
    "email_confirmation_codes": "email-confirmation-code",
    "documents": "document",
    "login_logs": "login-log",
    "channels": "channel",
    "channel_members": "channel-member",
    "messages": "message",
    "attachments": "attachment",
    "user_logs": "user-log",
    "user_profiles": "user-profile"
  },
  "routes": {},
  "notes": [
    "Check constraints: email format regex, price >= 0, rating 0-5, discount 0-100%, message length <= 3000 chars, confirmation code length = 6",
    "Cascade relationships: email_confirmation_codes ON DELETE CASCADE from user_accounts, channels -> channel_members CASCADE, messages -> attachments CASCADE, user_accounts -> user_logs CASCADE, user_accounts -> user_profiles CASCADE",
    "Set null relationships: login_logs user_account_id ON DELETE SET NULL, messages user_account_id ON DELETE SET NULL",
    "Unique constraints: user_accounts.email, products.sku, channels.channel_name, channel_members(channel_id, user_account_id), user_profiles.user_account_id",
    "Composite indexes: products(category_id, brand_id), login_logs(user_account_id, success), reviews(product_id, rating), channel_members(channel_id, role)",
    "Soft delete columns: user_accounts.deleted_at, channels.deleted_at, channel_members.deleted_at, messages.deleted_at, attachments.deleted_at",
    "Transaction boundaries handled at repository level with explicit EntityManager passing for cross-entity operations",
    "Custom markers @custom:start/@custom:end placed in entities for business logic, client configuration, and seed data"
  ],
  "optional_files": [
    { "path": "lib/db/scripts/dev-db-reset.ts", "purpose": "Reset schema local (drop/create/migrate/seed) phục vụ dev" }
  ]
}
